# Babel

> å‰æ²¿ï¼šæ–‡ç« èµ·æºåœ¨äºï¼Œæœ‹å‹è·Ÿæ ‘é…±è¯´åœ¨è§£å†³é¡¹ç›®å…¼å®¹IE11æµè§ˆå™¨è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°â€œçœ¼èŠ±ç¼­ä¹±â€çš„babelé…ç½®å’Œæ’ä»¶ç­‰ï¼Œå‚»å‚»åˆ†ä¸æ¸…é…ç½®é—´çš„åŒºåˆ«ã€ä»¥åŠä¸äº†è§£å¦‚ä½•å¼•ç”¨babelæ’ä»¶æ‰èƒ½è®©æ€§èƒ½æ›´ä½³ï¼Œå¦‚æœä½ ä¹Ÿæœ‰è¿™æ–¹é¢çš„ç–‘è™‘ï¼Œè¿™ç¯‡æ–‡ç« å¯èƒ½é€‚åˆä½ 

## 1.babel

> babelæ˜¯ä¸ªä»€ä¹ˆç©æ„ï¼Ÿ Babelæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç¼–è¾‘å™¨ï¼Œä¹Ÿå°±æ˜¯ä¸ªâ€œç¿»è¯‘å®˜â€çš„è§’è‰²ï¼Œæ¯”å¦‚æ ‘é…±å¬ä¸æ‡‚è¥¿ç­ç‰™è¯­ï¼Œéœ€è¦åˆ«äººå¸®æˆ‘ç¿»è¯‘æˆä¸ºä¸­æ–‡ï¼Œæˆ‘æ‰æ™“å¾—ã€‚é‚£ä¹ˆBabelå°±æ˜¯å¸®åŠ©æµè§ˆå™¨ç¿»è¯‘çš„ï¼Œè®©webåº”ç”¨èƒ½å¤Ÿè¿è¡Œæ—§ç‰ˆæœ¬çš„æµè§ˆå™¨ä¸­ï¼Œæ¯”å¦‚IE11æµè§ˆå™¨ä¸æ”¯æŒPromiseç­‰ES6è¯­æ³•ï¼Œé‚£è¿™ä¸ªæ—¶å€™åœ¨IE11æ‰“å¼€ä½ å†™çš„webåº”ç”¨ï¼Œåº”ç”¨å°±æ— æ³•æ­£å¸¸è¿è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦Babelæ¥â€œç¿»è¯‘â€æˆä¸ºIE11èƒ½è¯»æ‡‚çš„

### 1.1 Babelæ˜¯æ€ä¹ˆå·¥ä½œçš„ï¼Ÿ

> æœ¬è´¨ä¸Šå•ç‹¬é Babelæ˜¯æ— æ³•å®Œæˆâ€œç¿»è¯‘â€ï¼Œæ¯”å¦‚å®˜ç½‘çš„ä¾‹å­`const babel = code => code;`ä¸å€ŸåŠ©Babelæ’ä»¶çš„å‰æï¼Œè¾“å‡ºæ˜¯ä¸ä¼šæŠŠç®­å¤´å‡½æ•°â€œç¿»è¯‘â€çš„ï¼Œå¦‚æœæƒ³å®Œæˆå°±éœ€è¦ç”¨åˆ°æ’ä»¶ï¼Œæ›´å¤šæ¦‚å¿µç‚¹ç‚¹å‡» [å®˜æ–¹æ–‡æ¡£](https://link.juejin.cn?target=https%3A%2F%2Fwww.babeljs.cn%2Fdocs)

Babelå·¥ä½œåŸç†æœ¬è´¨ä¸Šå°±æ˜¯ä¸‰ä¸ªæ­¥éª¤ï¼šè§£æã€è½¬æ¢ã€è¾“å‡ºï¼Œå¦‚ä¸‹ğŸ‘‡æ‰€ç¤ºï¼Œ

![img](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9150bccc88ab45e48ab55af3089e2c1a~tplv-k3u1fbpfcp-watermark.awebp)

### 1.2 AST æ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ

> ğŸ‘¨â€ğŸ“ å•Šæ–ŒåŒå­¦ï¼š ä¸Šé¢è¯´åˆ°çš„æŠ½è±¡è¯­æ³•æ ‘ASTåˆæ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ

ç­”ï¼šæˆ‘ä»¬ä¸Šæ–‡æåˆ°ï¼ŒBabelåœ¨è§£ææ˜¯æ—¶å€™ä¼šé€šè¿‡å°†codeè½¬æ¢ä¸ºASTæŠ½è±¡è¯­æ³•æ ‘ï¼Œæœ¬è´¨ä¸Šæ˜¯ä»£ç è¯­æ³•ç»“æ„çš„ä¸€ç§æŠ½è±¡è¡¨ç¤ºï¼Œé€šè¿‡ä»¥æ ‘ğŸŒ²å½¢çš„ç»“æ„å½¢å¼è¡¨ç°å‡ºå®ƒçš„è¯­æ³•ç»“æ„ï¼ŒæŠ½è±¡åœ¨äºå®ƒçš„è¯­è¨€å½¢æ€ä¸ä¼šä½“ç°åœ¨åŸå§‹ä»£ç codeä¸­

ä¸‹é¢ä»‹ç»ä¸‹åœ¨å‰ç«¯é¡¹ç›®å¼€å‘ä¸­ä¸€äº›ASTçš„åº”ç”¨åœºæ™¯:

- `Vueæ¨¡ç‰ˆè§£æ`ï¼š æˆ‘ä»¬å¹³æ—¶å†™çš„`.vue`æ–‡ä»¶é€šè¿‡`vue-template-compiler`è§£æï¼Œ.vueæ–‡ä»¶å¤„ç†ä¸ºä¸€ä¸ªAST
- `Babelçš„â€œç¿»è¯‘â€` : å¦‚å°†ES6è½¬æ¢ä¸ºES5è¿‡ç¨‹ä¸­è½¬ä¸ºAST
- `webpackçš„æ’ä»¶UglifyJS`ï¼š `uglifyjs-webpack-plugin`ç”¨æ¥å‹ç¼©èµ„æºï¼Œuglifyjsä¼šé‡åˆ°éœ€è¦è§£æes6è¯­æ³•ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æœ¬è´¨ä¸Šä¹Ÿæ˜¯å€ŸåŠ©`babel-loader`

ä½ å¯ä»¥å®‰è£…é€šè¿‡æœ¬åœ°å®‰è£…`babel-cli`åšä¸ªéªŒè¯ï¼Œé€šè¿‡babel-cliç¼–è¯‘jsæ–‡ä»¶ï¼Œç©ç©â€œç¿»è¯‘â€

ğŸŒ²æ¨èé˜…è¯»ï¼š

- [é˜®ä¸€å³° - Babel å…¥é—¨æ•™ç¨‹](https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F01%2Fbabel.html%3Fbsh_bid%3D1656398345)

### 1.3 å¼€å‘è‡ªå·±çš„babelæ’ä»¶éœ€è¦äº†è§£ä»€ä¹ˆï¼Ÿ

> ğŸ‘¨â€ğŸ“ å•Šå¯åŒå­¦ï¼š æ ‘é…±ï¼Œæˆ‘æƒ³è‡ªå·±ä½¿ç”¨ASTå¼€å‘ä¸€ä¸ªbabelæ’ä»¶éœ€è¦ä½¿ç”¨åˆ°å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ

ç­”ï¼šæˆ‘ä»¬ä¸Šä¸€èŠ‚ä¸­æåˆ°babelä¸å€ŸåŠ©â€œå¤–æ´â€çš„è¯ï¼Œè‡ªå·±æ˜¯æ— æ³•å®Œæˆç¿»è¯‘ï¼Œè€Œä¸€ä¸ªå®Œæ•´çš„â€œç¿»è¯‘â€çš„è¿‡ç¨‹æ˜¯éœ€è¦èµ°å®Œè§£æã€è½¬æ¢ã€è¾“å‡ºæ‰èƒ½å®Œæˆæ•´ä¸ªé—­ç¯ï¼Œè€Œè¿™å…¶ä¸­çš„æ¯ä¸ªç¯èŠ‚éƒ½éœ€è¦å€ŸåŠ©babelä»¥ä¸‹è¿™äº›API

- `@babel/parser`ï¼š babelè§£æå™¨å°†æºä»£ç codeè§£ææˆ AST
- `@babel/generator`: å°†ASTè§£ç ç”Ÿæˆjsä»£ç  new Code
- `@babel/traverse `: ç”¨æ¥éå†ASTæ ‘ï¼Œå¯ä»¥ç”¨æ¥æ”¹é€ ASTï½ï¼Œå¦‚æ›¿æ¢æˆ–æ·»åŠ ASTåŸå§‹èŠ‚ç‚¹
- `@babel/core`ï¼šåŒ…æ‹¬äº†æ•´ä¸ªbabelå·¥ä½œæµ

ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•â€œç¿»è¯‘â€çš„demoï½

![img](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08cbcfcb8a9643fd9c512bd464c788cb~tplv-k3u1fbpfcp-watermark.awebp)

> ğŸ‘¦ï¼šå•Šå®½åŒå­¦ï¼šä½ ä¸æ˜¯è¯´`@babel/parser`æ˜¯ä¹Ÿå°†æºä»£ç codeè§£ææˆ ASTå—ï¼Ÿä¸ºå•¥`@babel/core`ä¹Ÿæ˜¯ï¼Ÿ

ç­”ï¼š@babel/coreåŒ…å«çš„æ˜¯æ•´ä¸ªbabelå·¥ä½œæµï¼Œåœ¨å¼€å‘æ’ä»¶çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæ¯ä¸ªAPIéƒ½å•ç‹¬å»å¼•å…¥å²‚ä¸æ˜¯è’™è”½äº†æ¥å§ï½äºæ˜¯å°±æœ‰äº†@babel/coreæ’ä»¶ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯æ ¸å¿ƒæ’ä»¶ï¼Œä»–å°†åº•å±‚çš„æ’ä»¶è¿›è¡Œå°è£…ï¼ˆåŒ…å«äº†parserã€generatorç­‰ï¼‰ï¼Œæé«˜åŸæœ‰çš„æ’ä»¶å¼€å‘æ•ˆç‡ï¼Œç®€åŒ–è¿‡ç¨‹ï¼Œå¥½ä¸€ä¸ªâ€œğŸŸè‚¯å¾·åŸºå…¨å®¶æ¡¶â€

ğŸŒ²æ¨èé˜…è¯»ï¼š

- [Babel æ’ä»¶æ‰‹å†Œ](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fjamiebuilds%2Fbabel-handbook%2Fblob%2Fmaster%2Ftranslations%2Fzh-Hans%2Fplugin-handbook.md)
- [å®ç°ä¸€ä¸ªçœŸæ­£çš„babelæ’ä»¶](https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F91948992)
- [ç†è§£babelçš„åŸºæœ¬åŸç†å’Œä½¿ç”¨æ–¹æ³•](https://link.juejin.cn?target=https%3A%2F%2Fwww.cnblogs.com%2Fjyybeam%2Fp%2F13375179.html)

### 1.4 Babelæ’ä»¶ç›¸å…³

> è®²å®ŒBabelçš„åŸºæœ¬ä½¿ç”¨ï¼Œæ¥ä¸‹æ¥èŠèŠæ’ä»¶ï¼Œä¸Šæ–‡æåˆ°å•ç‹¬é babelæ˜¯â€œéš¾æˆå¤§å™¨â€çš„ï¼Œéœ€è¦æ’ä»¶çš„è¾…åŠ©æ‰èƒ½å®ç°éœ¸ä¸šï¼Œé‚£æ’ä»¶æ˜¯æ€ä¹ˆæçš„å‘¢ï¼Ÿ

é€šè¿‡ç¬¬ä¸€èŠ‚çš„å­¦ä¹ æˆ‘ä»¬çŸ¥é“å®Œæˆç¬¬ä¸€æ­¥éª¤è§£æå®ŒASTåï¼Œæ¥ä¸‹æ¥æ˜¯è¿›å…¥è½¬æ¢ï¼Œæ’ä»¶åœ¨è¿™ä¸ªé˜¶æ®µå°±èµ·åˆ°å…³é”®ä½œç”¨äº†ã€‚

#### 1.4.1 æ’ä»¶çš„ä½¿ç”¨

> å‘Šè¯‰Babelè¯¥åšä»€ä¹ˆä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé…ç½®æ–‡ä»¶.babelrcæˆ–è€…babel.config.jsæ–‡ä»¶

å¦‚æœæˆ‘æƒ³æŠŠ`es2015`çš„è¯­æ³•è½¬åŒ–ä¸ºes5 åŠæ”¯æŒes2020çš„é“¾å¼å†™æ³•ï¼Œæˆ‘å¯ä»¥è¿™æ ·å†™

![img](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/13508d0507134ab89555b98bac01c297~tplv-k3u1fbpfcp-watermark.awebp)

ä¸Šå›¾æ‰€ç¤ºğŸ‘†ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬é…ç½®ä¸¤ä¸ªä¸œè¥¿ `present`å’Œ`plugin`

> ğŸ‘¨â€ğŸ“ å•Šå¯åŒå­¦ï¼šbabelä¸æ˜¯åªéœ€è¦pluginæ¥å¸®å¿™ç¿»è¯‘å—ï¼Œè¿™ä¸ªpresentåˆæ˜¯ä»€ä¹ˆç©æ„ï¼Ÿ

ç­”ï¼špresetsæ˜¯é¢„è®¾ï¼Œä¸¾ä¸ªä¾‹å­ï¼šæœ‰ä¸€å¤©æ ‘é…±è¦å»è‚¯å¾·åŸºä¹°é¸¡ç¿…ã€è–¯æ¡ã€å¯ä¹ã€æ±‰å ¡ã€‚ç„¶åæˆ‘å‘ç°æœ‰ä¸ªå¥—é¤AåŒ…å«äº†(è–¯æ¡ã€å¯ä¹ã€æ±‰å ¡)ï¼Œé‚£è¿™ä¸ªpresentå°±ç›¸å½“äºå¥—é¤Aï¼Œå®ƒåŒ…å«äº†ä¸€äº›æ’ä»¶é›†åˆï¼Œä¸€ä¸ªå¤§å¥—é¤ï¼Œè¿™æ ·æˆ‘å°±åªéœ€è¦ä¸€ä¸ªå¥—é¤A+é¸¡ç¿…å°±æå®šäº†ï¼Œä¸ç”¨é…ç½®å¾ˆå¤šæ’ä»¶ã€‚

å°±å¥½æ¯”ä¸Šé¢çš„es2015â€œå¥—é¤â€ï¼Œå…¶å®å°±æ˜¯Babelå›¢é˜Ÿå°†åŒå±ES2015ç›¸å…³çš„å¾ˆå¤šä¸ª`plugins`é›†åˆåˆ°`babel-preset-es2015`ä¸€ä¸ªpresetä¸­å»

> ğŸ‘§ å•ŠçªåŒå­¦ï¼š@babel/preset-envè¿™ä¸ªæ˜¯ä»€ä¹ˆï¼Ÿæˆ‘çœ‹å¾ˆå¤šbabelçš„é…ç½®éƒ½æœ‰

ç­”ï¼š@babel/preset-envè¿™ä¸ªæ˜¯ä¸€ä¸ªpresenté¢„è®¾ï¼Œæ¢å¥è¯è¯´å°±æ˜¯â€œè±ªåå¤§ç¤¼åŒ…â€ï¼ŒåŒ…æ‹¬ä¸€ç³»åˆ—æ’ä»¶çš„é›†åˆï¼ŒåŒ…å«äº†æˆ‘ä»¬å¸¸ç”¨çš„es2015,es2016, es2017ç­‰æœ€æ–°çš„è¯­æ³•è½¬åŒ–æ’ä»¶ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨æœ€æ–°çš„jsè¯­æ³•ï¼Œæ¯”å¦‚ letï¼Œconstï¼Œç®­å¤´å‡½æ•°ç­‰ç­‰ï¼Œä½†ä¸åŒ…æ‹¬stage-xé˜¶æ®µçš„æ’ä»¶ã€‚æ¢å¥è¯è¯´ï¼Œä»–åŒ…å«äº†æˆ‘ä»¬ä¸Šæ–‡æåˆ°äº†`es2015`ï¼Œæ˜¯ä¸ªâ€œå…¨å®¶æ¡¶â€äº†ï¼Œè€Œä¸ä»…æ˜¯ä¸ªå¥—é¤äº†ã€‚

#### 1.4.2 è‡ªå®šä¹‰ present

> ğŸ‘¦ å•Šæ–ŒåŒå­¦ï¼šæ ‘é…±ï¼Œé‚£æˆ‘æ˜¯ä¸æ˜¯å¯ä»¥è‡ªå·±æä¸€ä¸ªé¢„è®¾presentï¼Ÿ

ç­”: å¯ä»¥çš„ï¼Œä½†æ˜¯ä½ å¯ä»¥ä»¥ babel-preset-* çš„å‘½åè§„èŒƒæ¥åˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªpackjsonå¹¶å®‰è£…å¥½å®šå½±çš„ä¾èµ–å’Œä¸€ä¸ªindex.js æ–‡ä»¶ç”¨äºå¯¼å‡º .babelrcï¼Œæœ€ç»ˆå‘å¸ƒåˆ°npmä¸­ï¼Œå¦‚ä¸‹æ‰€ç¤º

![img](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/636cb45280d148fa94f0e245f4f98f03~tplv-k3u1fbpfcp-watermark.awebp)

#### 1.4.3 å…³äº polyfill

> æ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­ä½¿ç”¨ï¼Œä¼šä½¿ç”¨åˆ°ä¸€äº›es6çš„æ–°ç‰¹å¾æ¯”å¦‚`Array.from`ç­‰ï¼Œä½†ä¸æ˜¯æ‰€æœ‰çš„ JavaScript ç¯å¢ƒéƒ½æ”¯æŒ Array.fromï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Polyfillï¼ˆä»£ç å¡«å……ï¼Œä¹Ÿå¯è¯‘ä½œå…¼å®¹æ€§è¡¥ä¸ï¼‰çš„â€œé»‘ç§‘æŠ€â€ï¼Œå› ä¸ºbabelåªè½¬æ¢æ–°çš„jsè¯­æ³•ï¼Œå¦‚ç®­å¤´å‡½æ•°ç­‰ï¼Œä½†ä¸è½¬æ¢æ–°çš„APIï¼Œæ¯”å¦‚Symbolã€Promiseç­‰å…¨å±€å¯¹è±¡ï¼Œè¿™æ—¶å€™éœ€è¦å€ŸåŠ©`@babel/polyfill`ï¼ŒæŠŠesçš„æ–°ç‰¹æ€§éƒ½è£…è¿›æ¥ï¼Œä½¿ç”¨æ­¥éª¤å¦‚ä¸‹

- `npm å®‰è£…` : `npm install --save @babel/polyfill`
- `æ–‡ä»¶é¡¶éƒ¨å¯¼å…¥ polyfill`: `import  @babel/polyfilll`

ğŸ™…â€â™‚ï¸ï¼šç¼ºç‚¹ï¼šå…¨å±€å¼•å…¥æ•´ä¸ª polyfillåŒ…ï¼Œå¦‚promiseä¼šè¢«å…¨å±€å¼•å…¥ï¼Œæ±¡æŸ“å…¨å±€ç¯å¢ƒï¼Œæ‰€ä»¥ä¸å»ºè®®ä½¿ç”¨ï¼Œé‚£æœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹å¼ï¼Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨@babel/preset-envå¹¶ä¿®æ”¹é…ç½®ï¼Œå› ä¸º`@babel/preset-env`åŒ…å«äº†`@babel/polyfill`æ’ä»¶ï¼Œçœ‹ä¸‹ä¸€èŠ‚

#### 1.4.4 å¦‚ä½•é€šè¿‡ä¿®æ”¹@babel/preset-envé…ç½®ä¼˜åŒ–

> å®Œæˆä¸Šé¢çš„é…ç½®ï¼Œç„¶åç”¨Babelç¼–è¯‘ä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘ç°æœ‰æ—¶å€™æ‰“å‡ºçš„åŒ…ä½“ç§¯å¾ˆå¤§ï¼Œå› ä¸º@babel/polyfillæœ‰äº›ä¼šè¢«å…¨å±€å¼•ç”¨ï¼Œé‚£ä½ è¦å¼„æ¸…æ¥š@babel/preset-envçš„é…ç½®

`@babel/preset-env` ä¸­ä¸ `@babel/polyfill` çš„ç›¸å…³å‚æ•°æœ‰ä¸¤ä¸ªå¦‚ä¸‹ï¼š

- `targets`: æ”¯æŒçš„ç›®æ ‡æµè§ˆå™¨çš„åˆ—è¡¨
- `useBuiltIns`: å‚æ•°æœ‰ â€œentryâ€ã€â€usageâ€ã€false ä¸‰ä¸ªå€¼ã€‚é»˜è®¤å€¼æ˜¯falseï¼Œæ­¤å‚æ•°å†³å®šäº†babelæ‰“åŒ…æ—¶å¦‚ä½•å¤„ç†@babel/polyfilll è¯­å¥

ä¸»è¦èŠèŠå…³äº`useBuiltIns`çš„ä¸åŒé…ç½®å¦‚ä¸‹ï¼š

- `entry`: å»æ‰ç›®æ ‡æµè§ˆå™¨å·²æ”¯æŒçš„polyfilll æ¨¡å—ï¼Œå°†æµè§ˆå™¨ä¸æ”¯æŒçš„éƒ½å¼•å…¥å¯¹åº”çš„polyfilll æ¨¡å—ã€‚
- `usage`: æ‰“åŒ…æ—¶ä¼šè‡ªåŠ¨æ ¹æ®å®é™…ä»£ç çš„ä½¿ç”¨æƒ…å†µï¼Œç»“åˆ targets å¼•å…¥ä»£ç é‡Œå®é™…ç”¨åˆ°éƒ¨åˆ† polyfilllæ¨¡å—
- `false`: ä¸ä¼šè‡ªåŠ¨å¼•å…¥ polyfilll æ¨¡å—ï¼Œå¯¹polyfilllæ¨¡å—å±è”½

ğŸŒ²å»ºè®®ï¼šä½¿ç”¨ useBuiltIns: usageæ¥æ ¹æ®ç›®æ ‡æµè§ˆå™¨çš„æ”¯æŒæƒ…å†µï¼ŒæŒ‰éœ€å¼•å…¥ç”¨åˆ°çš„ polyfill æ–‡ä»¶ï¼Œè¿™æ ·æ‰“åŒ…ä½“ç§¯ä¹Ÿä¸ä¼šè¿‡å¤§

#### 1.4.5 webpackæ‰“åŒ…å¦‚ä½•ä½¿ç”¨babelï¼Ÿ

> å¯¹äº`@babel/core`ã€`@babel/preset-env` ã€`@babel/polyfill`ç­‰è¿™äº›æ’ä»¶ï¼Œå½“æˆ‘ä»¬åœ¨ä½¿ç”¨webpackè¿›è¡Œæ‰“åŒ…çš„æ—¶å€™ï¼Œå¦‚ä½•è®©webpackçŸ¥é“æŒ‰è¿™äº›è§„åˆ™å»ç¼–è¯‘jsã€‚è¿™æ—¶å°±éœ€è¦`babel-loader`äº†ï¼Œå®ƒç›¸å½“äºä¸€ä¸ªä¸­é—´æ¡¥æ¢ï¼Œé€šè¿‡è°ƒç”¨babel/coreä¸­çš„APIæ¥å‘ŠçŸ¥webpackè¦å¦‚ä½•å¤„ç†ã€‚

#### 1.4.6 å¼€å‘å·¥å…·åº“ï¼Œæ¶‰åŠåˆ°babelä½¿ç”¨æ€ä¹ˆé¿å…æ±¡æŸ“ç¯å¢ƒï¼Ÿ

> ğŸ‘¦ å•Šæ–ŒåŒå­¦ï¼šæˆ‘å¼€å‘äº†ä¸€ä¸ªå·¥å…·åº“ï¼Œä¹Ÿä½¿ç”¨äº†babelï¼Œå¦‚æœå¼•ç”¨polyfill,å¦‚ä½•é¿å…ä½¿ç”¨å¯¼è‡´çš„æ±¡æŸ“ç¯å¢ƒï¼Ÿ

ç­”ï¼šåœ¨å¼€å‘å·¥å…·åº“æˆ–è€…ç»„ä»¶åº“æ—¶ï¼Œå°±ä¸èƒ½å†ä½¿ç”¨babel-polyfilläº†ï¼Œå¦åˆ™å¯èƒ½ä¼šé€ æˆå…¨å±€æ±¡æŸ“ï¼Œå¯ä»¥ä½¿ç”¨`@babel/runtime`ã€‚å®ƒä¸ä¼šæ±¡æŸ“ä½ çš„åŸæœ‰çš„æ–¹æ³•ã€‚é‡åˆ°éœ€è¦è½¬æ¢çš„æ–¹æ³•å®ƒä¼šå¦èµ·ä¸€ä¸ªåå­—ï¼Œå¦åˆ™ä¼šç›´æ¥å½±å“ä½¿ç”¨åº“çš„ä¸šåŠ¡ä»£ç ï¼Œä½¿ç”¨`@babel/runtime`ä¸»è¦åœ¨äº

- å¯ä»¥å‡å°åº“å’Œå·¥å…·åŒ…çš„ä½“ç§¯ï¼Œè§„é¿babelç¼–è¯‘çš„å·¥å…·å‡½æ•°åœ¨æ¯ä¸ªæ¨¡å—é‡Œéƒ½é‡å¤å‡ºç°çš„æƒ…å†µ
- åœ¨æ²¡æœ‰ä½¿ç”¨ `@babel/runtime` ä¹‹å‰ï¼Œåº“å’Œå·¥å…·åŒ…ä¸€èˆ¬ä¸ä¼šç›´æ¥å¼•å…¥ polyfillã€‚å¦åˆ™åƒ Promise è¿™æ ·çš„å…¨å±€å¯¹è±¡ä¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´ï¼Œè¿™å°±è¦æ±‚åº“çš„ä½¿ç”¨è€…è‡ªå·±æä¾› polyfillã€‚è¿™äº› polyfill ä¸€èˆ¬åœ¨åº“å’Œå·¥å…·çš„ä½¿ç”¨è¯´æ˜ä¸­ä¼šæåˆ°ï¼Œæ¯”å¦‚å¾ˆå¤šåº“éƒ½ä¼šæœ‰è¦æ±‚æä¾› es5 çš„ polyfillã€‚åœ¨ä½¿ç”¨ babel-runtime åï¼Œåº“å’Œå·¥å…·åªè¦åœ¨ package.json ä¸­å¢åŠ ä¾èµ– babel-runtimeï¼Œäº¤ç»™ babel-runtime å»å¼•å…¥ polyfillå°±å¯ä»¥äº†

å¦‚ä½•ä½¿ç”¨ @babel/runtime

- 1.npmå®‰è£…

```
npm install --save-dev @babel/plugin-transform-runtime
npm install --save @babel/runtime
å¤åˆ¶ä»£ç 
```

- 2.é…ç½®

![img](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46bdbe525fa84d6a9240881d95ca633c~tplv-k3u1fbpfcp-watermark.awebp)

### 1.5 å…³äºbabelå®¹æ˜“æ··æ·†çš„ç‚¹

#### 1.5.1 babel-coreå’Œ@babel/core åŒºåˆ«

> ğŸ‘¦ï¼šå•Šå‘†åŒå­¦ï¼šbabel-coreå’Œ@babel/coreæ˜¯ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

ç­”ï¼›@babelæ˜¯åœ¨babel7ä¸­ç‰ˆæœ¬æå‡ºæ¥çš„ï¼Œå°±ç±»ä¼¼äº vue-cli å‡çº§åä½¿ç”¨@vue/cliä¸€æ ·çš„é“ç†ï¼Œæ‰€ä»¥babel7ä»¥åçš„ç‰ˆæœ¬éƒ½æ˜¯ä½¿ç”¨ `@babel` å¼€å¤´å£°æ˜ä½œç”¨åŸŸ



> å‚è€ƒé“¾æ¥ï¼š[Babelé…ç½®å‚»å‚»çœ‹ä¸æ‡‚ï¼Ÿ](https://juejin.cn/post/6863705400773083149)

